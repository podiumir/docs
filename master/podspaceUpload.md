- [مقدمه](#menu)
- [پیش از شروع](#menu)
- [آپلود فایل با url](#menu)
- [آپلود تصویر base64](#menu)
- [ایجاد فولدر](#menu)
- [دریافت کلید کسب و کار](#menu)
- [بررسی فضای خالی برای بارگذاری](#menu)



## مقدمه
با استفاده از سرویس های پاداسپیس میتوانید فایلهای خود را به فضای ابری اختصاصی خودتان در پاداسپیس انتقال دهید و آنها را مدیریت کنید.

## پیش از شروع
* URL فراخوانی سرویس ها: https://api.pod.ir/srv/sc/nzh/doServiceCall
* تمامی درخواست ها با متد POST ارسال می­شوند.
* Header درخواست:
پارامترهای زیر در Header تمام درخواست ها ثابت است:

|           پارامتر    |    توضیحات                                 |
|----------------------:|---------------------------------------------:|
|    \_token\_    |    API token دریافتی از پنل کسب و کاری    |
|    \_token_issuer\_    |    این پارامتر دارای مقدار ثابت "1" است.    |
|    Content-Type    |    application/x-www-form-urlencoded    |
|   Authorization    |     دریافتی از سرویس دریافت توکن    |

* بدنه درخواست:
پارامترهای زیر در بدنه تمام درخواست ها ثابت است:

|    پارامتر    |    توضیحات    |
|-------------------:|----------------------------------------------------------------:|
|    scProductId    |    شناسه سرویس در حال استفاده    |
|    scApiKey    |    API Key دریافتی برای سرویس مورد   نظر از پنل کسب و کاری     |  

- جهت دریافت apikey کالکشن postman زیر را دریافت کنید. ابتدا میبیاست سرویس **درخواست سرویس** را اجرا کنید وسپس پارامتر id بازگشتی در پاسخ این سرویس را در سرویس **دریافت apikey** وارد و apikey را دریافت کنید. این مقادیر در قسمت examples درخواست های postman مشخص شده اند.  

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[کالکشن postman راهنمای دریافت apikey](https://space.pod.ir/file/B9SAPKV6CHX9MUX6?dl=1)

* json Object ها در پارامتری به نام body  ارسال می­شوند.
* ساختار پاسخ دریافتی پس از فراخوانی سرویس به صورت زیر است که پاسخ دریافتی از endpoint  مورد نظر در پارامتر result قرار دارد.

```javascript
{
  "hasError": false/true,
  "messageId": 0,
  "referenceNumber": "",
  "errorCode": 0,
  "count": 0,
  "ott": "",
  "result": {
    "result": "response",
    "header": {},
    "statusCode":
  }
}
```  

- پارامترهای مورد نیاز جهت ارسال در درخواست، نمونه پاسخ برگشتی و موارد مربوط دیگر به هر سرویس را می توانید در کالکشن Postman زیر ببینید.   

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[کالکشن postman درخواست ها](https://space.pod.ir/file/JISYC86ABWSWZ12Q?dl=1)
<div class="box-end">
</div>


## آپلود فایل با url


از این متد برای آپلود فایل از URL (آدرس فایل در اینترنت) استفاده می‌شود.

به عنوان ورودی filename (در صورت تکراری بودن نام را اتوماتیک تغییر می دهد) و url را دریافت می‌کند.

خطاهایی که ممکن است در کار با این متد پیش‌آید:


|کد|پارامتر|توضیحات|
|----|----|------|
|4| PERMISSION_DENIED| عدم دسترسی|
|21|INVALID_TOKEN|توکن نامعتبر|
|40|TOKEN_NOT_AUTHORIZED|توکن احراز نشده|
|101|INVALID_REQUEST|درخواست نامعتبر|
|200|FILE_NOT_ATTACHED|فایل ارسال نشده‌است|
|201|ERROR_IN_SAVING_FILE|خطا در ذخیره‌سازی|
|203|FILE_ALREADY_EXISTS|فولدری با این نام موجود است|
|206|NO_SPACE_FOR_SAVING|اتمام فضای ذخیره‌سازی|
|999|UNKNOWN_ERROR|خطای ناشناخته|




## آپلود تصویر base64

از این متد برای آپلود عکس با فرمت  base64  استفاده می‌شود.

به ‌عنوان ورودی filename و file را می‌گیرد با این‌تفاوت که مقادیر xC و yC و wC و hC را نیز برای تعیین قسمت برش داده شده‌ی عکس با مقیاس پیکسل با توجه به تصویر زیر دریافت می‌کند.


![base64](https://core.pod.ir/nzh/image/?imageId=69903&width=955&height=559&hashCode=16a5d6e3ef3-0.011955855778276847)




خطاهایی که ممکن است در کار با این متد پیش‌آید:

|کد|پارامتر|توضیحات|
|----|----|------|
|4| PERMISSION_DENIED| عدم دسترسی|
|21|INVALID_TOKEN|توکن نامعتبر|
|31|INVALID_FORMAT|فرمت نامعتبر|
|40|TOKEN_NOT_AUTHORIZED|توکن احراز نشده|
|101|INVALID_REQUEST|درخواست نامعتبر|
|200|FILE_NOT_ATTACHED|فایل ارسال نشده‌است|
|201|ERROR_IN_SAVING_FILE|خطا در ذخیره‌سازی|
|203|FILE_ALREADY_EXISTS|فولدری با این نام موجود است|
|206|NO_SPACE_FOR_SAVING|اتمام فضای ذخیره‌سازی|
|999|UNKNOWN_ERROR|خطای ناشناخته|


## ایجاد فولدر

از این متد برای ایجاد ساختار فولدر درون سرور استفاده می شود.

خطاهایی که ممکن است در کار با این متد پیش آید:

|کد|پارامتر|توضیحات|
|----|----|------|
|21|INVALID_TOKEN|توکن نامعتبر|
|40|TOKEN_NOT_AUTHORIZED|توکن احراز نشده|
|101|INVALID_REQUEST|درخواست نامعتبر|
|201|ERROR_IN_SAVING_FILE|خطا در ذخیره‌سازی|
|202|FILE_NOT_FOUND|فایل پیدا نشده‌است|
|203|FILE_ALREADY_EXISTS|فایل موجود است|

## دریافت کلید کسب و کار

کلید ساخته شده برای آپلود فایل کاربر توسط کسب و کار را برمی گرداند.

خطاهایی که ممکن است در کار با این متد پیش‌آید:


|کد|پارامتر|توضیحات|
|----|----|------|
|4| PERMISSION_DENIED| عدم دسترسی|
|21|INVALID_TOKEN|توکن نامعتبر|
|40|TOKEN_NOT_AUTHORIZED|توکن احراز نشده|
|101|INVALID_REQUEST|درخواست نامعتبر|
|999|UNKNOWN_ERROR|خطای ناشناخته|


## بررسی فضای خالی برای بارگذاری


وجود میزان فضای درخواستی را برای بارگذاری فایل بررسی میکند.

خطاهایی که ممکن است در کار با این متد پیش‌آید:

|کد|پارامتر|توضیحات|
|----|----|------|
|4| PERMISSION_DENIED| عدم دسترسی|
|21|INVALID_TOKEN|توکن نامعتبر|
|40|TOKEN_NOT_AUTHORIZED|توکن احراز نشده|
|101|INVALID_REQUEST|درخواست نامعتبر|
|999|UNKNOWN_ERROR|خطای ناشناخته|  

