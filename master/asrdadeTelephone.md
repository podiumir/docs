- [مقدمه](#menu)
- [پیش از شروع](#menu)
- [دریافت توکن](#menu)
- [درخواست فعالسازی تلفن](#menu)
- [تایید فعالسازی تلفن](#menu)
- [جداول](#menu)
- [خطاها](#menu)

## مقدمه
<div class="box-end">
</div>

## پیش از شروع
* URL فراخوانی سرویس ها: https://api.pod.ir/srv/sc/nzh/doServiceCall
* تمامی درخواست ها با متد POST ارسال می­شوند.
* Header درخواست:
پارامترهای زیر در Header تمام درخواست ها ثابت است:

|           پارامتر    |    توضیحات                                 |
|----------------------:|---------------------------------------------:|
|    \_token\_    |    API token دریافتی از پنل کسب و کاری    |
|    \_token_issuer\_    |    این پارامتر دارای مقدار ثابت "1" است.    |
|    Content-Type    |    application/x-www-form-urlencoded    |
|   Authorization    |     دریافتی از سرویس دریافت توکن    |

* بدنه درخواست:
پارامترهای زیر در بدنه تمام درخواست ها ثابت است:

|    پارامتر    |    توضیحات    |
|-------------------:|----------------------------------------------------------------:|
|    scProductId    |    شناسه سرویس در حال استفاده    |
|    scApiKey    |    API Key دریافتی برای سرویس مورد   نظر از پنل کسب و کاری     |

* json Object ها در پارامتری به نام body  ارسال می­شوند.
* ساختار پاسخ دریافتی پس از فراخوانی سرویس به صورت زیر است که پاسخ دریافتی از endpoint  مورد نظر در پارامتر result قرار دارد.

```javascript
{
"hasError": false/true,
"messageId": 0,
"referenceNumber": "",
"errorCode": 0,
"count": 0,
"ott": "",
"result": {
"result": "response",
"header": {},
"statusCode":
}
}
```
<div class="box-end">
</div>

## دریافت توکن

برای استفاده از تمامی سرویس ها می بایست ابتدا با استفاده از این سرویس توکن را دریافت نموده و در پارامتر Authorization در هدر درخواست ارسال کنید.
* شناسه سرویس: 46742
* پارامترهای ورودی: ندارد.
* پاسخ برگشتی: Json با پارامترهای زیر:

| پارامتر | نوع | توضیحات |
|--------:|---------:|---------:|
| \_token_type\_ | String | نوع توکن |
| \_access_token\_ | String | توکن دسترسی |

توجه : فرمت ارسال توکن در پارامتر Authorization به صورت زیر است:  

Authorization: [token_type] [access_token]  

## درخواست فعالسازی تلفن

با استفاده از این سرویس درخواستی برای فعالسازی یک شماره تلفن ثبت کرد.
برای استعلام جزئیات در قبوض تلفن باید حتما پیش از آن شماره از سمت کاربر تایید شود. برای این احراز هویت از این سرویس و سرویس بعد استفاده میشود.
* شناسه سرویس: 43963
* پارامترهای ورودی: یک json با ساختار و پارامترهای زیر:

| توضیحات | نام پارامتر |
|------------:|-------------:|
| شماره تلفن | Tel |

* پاسخ برگشتی:
در صورت استعلام موفق فیلدهای خروجی به صورت Json:

| مقدار | پارامتر |
|----------:|---------:|
| کد | Status |
| پیام | Message |

در غیر اینصورت :

| مقدار | پارامتر |
|--------------------------------:|---------:|
|  کد خطا | Status |
| پیام خطا | Message |

<div class="box-end">
</div>

## تایید فعالسازی تلفن

با استفاده از این سرویس میتوان فعال شدن شماره تلفن را تایید کرد.
* شناسه سرویس: 44092
* پارامترهای ورودی: یک json با ساختار و پارامترهای زیر:

| توضیحات | نام پارامتر |
|-------------:|-------------:|
| شماره تلفن | Tel |
| کد فعالسازی | Code |

پارامتر code مقداری است که بصورت تماس صوتی روی شماره مورد نظر، پس از اجرای سرویس قبل (درخواست فعالسازی تلفن) اعلام می¬شود.

* پاسخ برگشتی:
در صورت استعلام موفق فیلدهای خروجی به صورت Json:

| مقدار | پارامتر |
|----------:|---------:|
| کد | Status |
| پیام | Message |

در غیر اینصورت :

| مقدار | پارامتر |
|--------------------------------:|---------:|
|  کد خطا | Status |
| پیام خطا | Message |

<div class="box-end">
</div>
